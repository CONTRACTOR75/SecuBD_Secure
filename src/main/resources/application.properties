spring.application.name=SecureDemo

# Configuration TYDB Distant / Les variables sont déclarés sur la plateforme
server.port=${PORT:8081}
spring.datasource.url=jdbc:mysql://gateway01-privatelink.eu-central-1.prod.aws.tidbcloud.com:4000/security_demo
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# Decommenter pour prendre effet
# Configuration MySQL (XAMPP) Locale
# Port différent du projet vulnérable
# server.port=8081
# spring.datasource.url=jdbc:mysql://localhost:3308/security_demo
# spring.datasource.username=user_apps
# spring.datasource.password=

# Driver MySQL (important avec Spring Boot 3+)
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true
spring.jpa.show-sql=false # Desactiver en mode en ligne
# spring.jpa.properties.hibernate.format_sql=true

# Optionnel mais utile pour la démo
spring.jpa.open-in-view=false


################
jwt.secret=C4Nq7hQlZkmxFE76okgeyAX1+/K1TJATZ+HavVxmTn/lgU0ZE6l+r+Ccea4F/JJeGoAL13QMB7gd+zppnVAKkA==
jwt.expiration=3600000
jwt.refresh-expiration=86400000

# Configuration de la validation
spring.mvc.throw-exception-if-no-handler-found=false
spring.web.resources.add-mappings=true

# Logging
logging.level.com.secubd.secure_demo=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.file.name=logs/application.log
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Sécurité des headers HTTP
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-exception=false

# Actuator (optionnel, pour monitoring)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# Limite de taille des requêtes
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Configuration CORS
cors.allowed-origins=http://localhost:8080,http://localhost:8081

##########
# Configuration des ressources statiques
spring.web.resources.static-locations=classpath:/static/
spring.mvc.static-path-pattern=/**
